(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{610:function(e,t,o){"use strict";o.r(t);var n=o(83),r=o(177),l=o.n(r),d=o(612),v=o(549),c=o(547),_=o(543),component=Object(n.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-container",[o("v-card",[o("v-card-title",{staticClass:"headline primary--text"},[e._v("Les modules")]),e._v(" "),o("v-card-text",[o("v-card-title",{staticClass:"subheading primary--text"},[e._v("Qu'est-ce qu'un module (au sens Node.js) ?")]),e._v(" "),o("p",[e._v("\n            En Node.js, chaque fichier représente un module :\n            "),o("ul",[o("li",[e._v("chaque module a un scope : c'est à dire qu'une variable définie à l'intérieur d'un module n'est pas disponible en dehors, à moins d'être exportée ;")]),e._v(" "),o("li",[e._v("un module peut exporter une ou plusieurs variables ;")]),e._v(" "),o("li",[e._v("un module peut importer les variables d'autres modules (si elles sont exportées).")])]),e._v(" "),o("v-alert",{attrs:{outlined:"",value:!0,color:"info",icon:"info",outline:""}},[e._v("\n              Il existe plusieurs manières de gérer les modules en JavaScript :\n              "),o("ul",[o("li",[e._v("CommonJS : utilisé par les versions actuelles de Node.js ;")]),e._v(" "),o("li",[e._v("import/export EcmaScript 6 : à partir de la version 14 de Node.js ("),o("a",{attrs:{href:"https://nodejs.org/api/esm.html"}},[e._v("documentation")]),e._v(") ;")]),e._v(" "),o("li",[e._v("RequireJS : non supporté par Node.js.")])])]),e._v(" "),o("v-alert",{attrs:{outlined:"",value:!0,color:"warning",icon:"warning",outline:""}},[e._v("\n              Il n'est possible pas possible d'utiliser les 2 notations au sein d'un module.\n            ")])],1),e._v(" "),o("v-card-title",{staticClass:"subheading primary--text"},[e._v("La syntaxe ES6 (recommandée sur les nouveaux projets)")]),e._v(" "),o("v-card-title",{staticClass:"subtitle-1 primary--text"},[e._v("Prérequis")]),e._v(" "),o("p",[e._v("\n            Pour que Node.js utilise la syntaxe ES6, il faut :\n            "),o("ul",[o("li",[e._v("soit ajouter "),o("code",[e._v('"type" = "module"')]),e._v(" dans le "),o("code",[e._v("package.json")])]),e._v(" "),o("li",[e._v("soit que le fichier ait l'extension "),o("code",[e._v(".mjs")])])])]),e._v(" "),o("v-card-title",{staticClass:"subtitle-1 primary--text"},[e._v("Comment exporter une variable ?")]),e._v(" "),o("p",[e._v("\n            Pour exporter une variable, il suffit d'ajouter le mot clé "),o("code",[e._v("export")]),e._v(".\n            "),o("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[o("code",{attrs:{language:"js"}},[e._v("\n// fichier say-hello.js\nexport let helloCount = 0;\n\nexport const sayHello = (name) => {\n  helloCount ++;\n  console.log(`hello ${name}`);\n};\n            ")])])]),e._v(" "),o("p",[e._v("\n            Il est également possible d'exporter un unique objet en définissant la variable "),o("code",[e._v("module.exports")]),e._v(" "),o("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[o("code",{attrs:{language:"js"}},[e._v("\n// fichier say-goodbye.js\nexport default (name) => {\n  console.log(`Good Bye ${name}`);\n};\n            ")])])]),e._v(" "),o("v-card-title",{staticClass:"subtitle-1 primary--text"},[e._v("Comment importer un module ?")]),e._v(" "),o("p",[e._v("\n            Pour importer un module, il faut utiliser les mots clés "),o("code",[e._v("import")]),e._v(" et "),o("code",[e._v("from")]),e._v(".\n            "),o("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[o("code",{attrs:{language:"js"}},[e._v("\nimport * as sayHelloModule from './say-hello.js';\nimport { sayHello } from './say-hello.js';\nimport sayGoodbye from './say-goodbye.js';\n\nsayHello('Sylvain');\nsayHelloModule.sayHello('Patrick');\nsayGoodbye('Julien');\n            ")])])]),e._v(" "),o("p",[e._v("\n            Le mot clé "),o("code",[e._v("import")]),e._v(" va chercher :\n            "),o("ul",[o("li",[e._v('un module "core", c\'est à dire un module inclus par défaut dans Node.js (ils sont documentés sur le site de '),o("a",{attrs:{href:"https://nodejs.org/api/"}},[e._v("Node.js")]),e._v(" : "),o("code",[e._v("path")]),e._v(", "),o("code",[e._v("http")]),e._v("...) ;")]),e._v(" "),o("li",[e._v("un fichier local si le paramètre est un chemin (i.e. commence par "),o("code",[e._v("./")]),e._v(", "),o("code",[e._v("../")]),e._v(" ou "),o("code",[e._v("/")]),e._v(") ;")]),e._v(" "),o("li",[e._v("une librairie présente dans le dossier "),o("code",[e._v("node_modules")]),e._v(" dans le dossier courant ou dans un dossier ascendant (par récursivité).")])]),e._v("\n            Il existe une méthode "),o("code",[e._v("import('monmodule')")]),e._v(" qui permet de charger de manière dynamique une méthode (par exemple à l'intérieur d'une fonction). Cette méthode retourne une promesse.\n          ")]),e._v(" "),o("p",[o("v-alert",{attrs:{outlined:"",value:!0,color:"info",icon:"info",outline:""}},[e._v("\n              A noter, les modules ES6 utilisent un cache, c'est à dire que chaque fichier n'est chargé qu'une seule fois (et donc executé qu'une seule fois)."),o("br"),e._v("\n              Ainsi, le code à l'intérieur d'un module peut servir pour initialiser le module (chargement de la configuration par exemple),\n              car il ne sera executé qu'une fois (souvent au démarrage de l'application).\n            ")])],1),e._v(" "),o("v-card-title",{staticClass:"subheading primary--text"},[e._v("La syntaxe CommonJS")]),e._v(" "),o("v-card-title",{staticClass:"subtitle-1 primary--text"},[e._v("Comment exporter une variable ?")]),e._v(" "),o("p",[e._v("\n            Pour exporter une variable, il suffit d'ajouter un attribut à "),o("code",[e._v("exports")]),e._v(".\n            "),o("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[o("code",{attrs:{language:"js"}},[e._v("\n// fichier say-hello.js\n\nexports.helloCount = 0;\n\nexports.sayHello = (name) => {\n  exports.helloCount ++;\n  console.log(`hello ${name}`);\n};\n            ")])])]),e._v(" "),o("p",[e._v("\n            Il est également possible d'exporter un unique objet en définissant la variable "),o("code",[e._v("module.exports")]),e._v(" "),o("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[o("code",{attrs:{language:"js"}},[e._v("\n// fichier say-goodbye.js\n\nmodule.exports = (name) => {\n  console.log(`Good Bye ${name}`);\n};\n            ")])])]),e._v(" "),o("v-card-title",{staticClass:"subtitle-1 primary--text"},[e._v("Comment importer un module ?")]),e._v(" "),o("p",[e._v("\n            Pour importer un module, il faut utiliser la fonction "),o("code",[e._v("require()")]),e._v(".\n            "),o("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[o("code",{attrs:{language:"js"}},[e._v("\nconst { sayHello } = require('./say-hello');\nconst sayGoodbye = require('./say-goodbye');\n\nsayHello('Sylvain');\nsayGoodbye('Julien');\n            ")])])]),e._v(" "),o("p",[e._v("\n            La fonction "),o("code",[e._v("require()")]),e._v(" va chercher à charger par priorité :\n            "),o("ul",[o("li",[e._v('un module "core", c\'est à dire un module inclus par défaut dans Node.js (ils sont documentés sur le site de '),o("a",{attrs:{href:"https://nodejs.org/api/"}},[e._v("Node.js")]),e._v(" : "),o("code",[e._v("path")]),e._v(", "),o("code",[e._v("http")]),e._v("...) ;")]),e._v(" "),o("li",[e._v("un fichier local si le paramètre est un chemin (i.e. commence par "),o("code",[e._v("./")]),e._v(", "),o("code",[e._v("../")]),e._v(" ou "),o("code",[e._v("/")]),e._v(") ;")]),e._v(" "),o("li",[e._v("une librairie présente dans le dossier "),o("code",[e._v("node_modules")]),e._v(" dans le dossier courant ou dans un dossier ascendant (par récursivité).")])]),e._v("\n            La chaîne de caractères passée en paramètre peut correspondre soit à :\n            "),o("ul",[o("li",[e._v("un fichier (les extensions "),o("code",[e._v(".js")]),e._v(" ou "),o("code",[e._v(".json")]),e._v(" peuvent être omises) ;")]),e._v(" "),o("li",[e._v("\n                un dossier : dans ce cas-là, Node.js va chercher un fichier "),o("code",[e._v("package.json")]),e._v(" à l'intérieur du dossier pour savoir quel fichier il faut charger (balise "),o("code",[e._v("main")]),e._v(").\n                Par défaut, c'est le fichier "),o("code",[e._v("index.js")]),e._v(" qui est chargé.\n              ")])])]),e._v(" "),o("p",[e._v("\n            Exemples :\n            "),o("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[o("code",{attrs:{language:"js"}},[e._v("\n// Récupération de la fonction join exportée par le module path (module 'core' inclus dans Node.js)\nconst { join } = require('path');\n\n// Chargement du fichier say-goodbye.js en relatif par rapport au dossier courant\nconst sayGoodbye = require('./say-goodbye');\n\n// Chargement de la librairie express (présente dans dossier 'node_modules')\nconst express = require('express');\n\n// Chargement du fichier 'lib/index.js' de la librairie vuetify (présente dans dossier 'node_modules') :\n// Cette notation est souvent déconseillée car l'import devient dépendant de la structure interne de la librairie importée.\nconst Vuetify = require('vuetify/lib');\n            ")])])]),e._v(" "),o("p",[o("v-alert",{attrs:{outlined:"",value:!0,color:"info",icon:"info",outline:""}},[e._v("\n              A noter, "),o("code",[e._v("require()")]),e._v(" a un cache, c'est à dire que chaque fichier n'est chargé qu'une seule fois (et donc executé qu'une seule fois)."),o("br"),e._v("\n              Ainsi, le code à l'intérieur d'un module peut servir pour initialiser le module (chargement de la configuration par exemple),\n              car il ne sera executé qu'une fois (souvent au démarrage de l'application).\n            ")])],1),e._v(" "),o("v-card-title",{staticClass:"subheading primary--text"},[e._v("Les objets globaux")]),e._v(" "),o("p",[e._v("\n            Des objets globaux sont disponibles dans tous les modules (sans qu'il soit nécessaire de les importer). Il y a notamment :\n            "),o("ul",[o("li",[e._v("(uniquement en CommonJS) "),o("code",[e._v("__dirname")]),e._v(" qui est une chaîne de caractères qui correspond au chemin absolu du dossier dans lequel se situe le module ;")]),e._v(" "),o("li",[e._v("(uniquement en CommonJS) "),o("code",[e._v("__filename")]),e._v(" qui est une chaîne de caractères qui correspond au chemin absolu du module ;")]),e._v(" "),o("li",[e._v("(uniquement en ES6) "),o("code",[e._v("import")]),e._v(" qui expose les "),o("a",{attrs:{href:"https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Statements/import.meta"}},[e._v("données du module courant")]),e._v(" (par exemple "),o("code",[e._v("import.meta.url")]),e._v(" est l'URL du module courant) ;")]),e._v(" "),o("li",[o("code",[e._v("console")]),e._v(" ;")]),e._v(" "),o("li",[e._v("(uniquement en CommonJS) "),o("code",[e._v("exports")]),e._v(", "),o("code",[e._v("module")]),e._v(" et "),o("code",[e._v("require")]),e._v(" ;")]),e._v(" "),o("li",[o("code",[e._v("setTimeout")]),e._v(", "),o("code",[e._v("setInterval")]),e._v(", "),o("code",[e._v("setImmediate")]),e._v(", "),o("code",[e._v("clearTimeout")]),e._v(", "),o("code",[e._v("clearInterval")]),e._v(" et "),o("code",[e._v("clearImmediate")]),e._v(" ;")]),e._v(" "),o("li",[o("code",[e._v("process")]),e._v(" qui représente le processus en cours d'exécution : variables d'environnement, pid... ("),o("a",{attrs:{href:"https://nodejs.org/api/process.html#process_process"}},[e._v("plus d'infos")]),e._v(") ;")]),e._v(" "),o("li",[e._v("et plus encore : "),o("a",{attrs:{href:"https://nodejs.org/api/globals.html"}},[e._v("https://nodejs.org/api/globals.html")]),e._v(".")])])]),e._v(" "),o("v-card-title",{staticClass:"subheading primary--text"},[e._v('Les modules "core" de Node.js')]),e._v(" "),o("p",[e._v('\n            Node.js inclut des modules "core". La liste complète est disponible sur la '),o("a",{attrs:{href:"https://nodejs.org/docs/latest/api/"}},[e._v("documentation")]),e._v(". Les plus utilisés sont :\n            "),o("ul",[o("li",[o("a",{attrs:{href:"https://nodejs.org/docs/latest/api/fs.html"}},[e._v("fs")]),e._v(" : qui permet de manipuler les fichiers ("),o("code",[e._v("readFile")]),e._v(", "),o("code",[e._v("stat")]),e._v("...) ;")]),e._v(" "),o("li",[o("a",{attrs:{href:"https://nodejs.org/docs/latest/api/path.html"}},[e._v("path")]),e._v(" : qui permet de manipuler les chemins de fichier (par exemple, "),o("code",[e._v("join")]),e._v(" permet de concaténer plusieurs chemins, en prenant soin de placer les bons séparateur et de résoudre les "),o("code",[e._v("..")]),e._v(" et "),o("code",[e._v(".")]),e._v(") ;")]),e._v(" "),o("li",[o("a",{attrs:{href:"https://nodejs.org/docs/latest/api/http.html"}},[e._v("http")]),e._v(" et "),o("a",{attrs:{href:"https://nodejs.org/docs/latest/api/https.html"}},[e._v("https")]),e._v(" : qui permettent de créer des clients et serveurs http(s) ;")])])])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;l()(component,{VAlert:d.a,VCard:v.a,VCardText:c.a,VCardTitle:c.b,VContainer:_.a})}}]);